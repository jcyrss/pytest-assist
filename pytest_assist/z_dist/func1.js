var E="0.1.1",_={cur:0,en:0,zh:1};navigator.language==="zh-CN"?_.cur=_.zh:_.cur=_.en;function n(...u){return u[_.cur]}function g(u){u=u.toLowerCase();var e=null,a=Array.prototype.find;return a.call(document.styleSheets,c=>(e=a.call(c.cssRules,i=>i instanceof CSSStyleRule&&i.selectorText.toLowerCase()==u),e!=null)),e}var y={};async function T(u,e="get",a={},c=!0,i={},t=!1){let s={method:e,...i};if(e==="get"){let p=new URLSearchParams(a).toString();if(p.length>0&&(u+="?"+p),t&&(delete s.trycache,y.hasOwnProperty(u)))return y[u]}else s.headers=s.headers?s.headers:{},s.headers={"Content-Type":"application/json",...s.headers},s.body=JSON.stringify(a);c&&(s.headers={Authorization:"Bearer "+sessionStorage.elifeToken,...s.headers});const l=await fetch(u,s);if(l.status!==200)throw alert("HTTP error : "+l.status),"HTTP error : "+l.status;let o=await l.json();if(o.ret!=0&&o.ret>0)throw alert(o.msg),o.msg;return i.trycache&&(y[u]=o),o}class w{constructor(){this.subscribers=[],this.mustMsgList=[],this.ws=null,this.wsconnect(),this.ws_port=null}async wsconnect(){if(!this.ws_port){let c=await T("/api/get_ws_port","post",{cmd:"get_ws_port"});this.ws_port=c.ws_port}let e=`ws://${window.location.hostname}:${this.ws_port}/client`;var a=new WebSocket(e);a.onopen=c=>{console.log("ws connected ok."),document.getElementById("ws_connectiong_state").innerHTML="🛜";for(let i of this.mustMsgList)a.send(JSON.stringify(i,void 0,2));this.mustMsgList=[]},a.onmessage=c=>{try{let i=JSON.parse(c.data);for(let t of this.subscribers)t.handleWSMsg(i)}catch(i){console.log(i)}},a.onclose=c=>{setTimeout(i=>{this.wsconnect()},10),document.getElementById("ws_connectiong_state").innerHTML="⚠️"},a.onerror=c=>{console.log("Socket encountered error, closing socket"),a.close()},this.ws=a}sendMsg(e,a=!1){return!this.ws||this.ws.readyState!==1?a?(this.mustMsgList.push(e),2):1:(this.ws.send(JSON.stringify(e,void 0,2)),0)}register(e){this.subscribers.indexOf(e)<0&&this.subscribers.push(e)}unregister(e){const a=this.subscribers.indexOf(e);a>=0&&this.subscribers.splice(a,1)}}const d=new w;class S{constructor(){this.subscribers=[],this.needCallPrism=!1,this.show_result_details=!0,this.curTest={showAddTest:!1,addTest_keys:[],addTest_tags:[],addTest_nodeIds:[],name:"--",results:[],start_time:"--",end_time:"--",duration:0,stats:{total:0,deselected:0,rtotal:0,executed:0,passed:0,failed:0,skipped:0,xfailed:0,xpassed:0,st_error:0,st_ok:0},collect_errors:[],server_working_dir:"--",haveRun:!1,testAborted:!1,curNodeId:null,pytest_cases_tree:{},pytest_cases_tree_curFile:null}}register(e){this.subscribers.indexOf(e)<0&&this.subscribers.push(e)}unregister(e){const a=this.subscribers.indexOf(e);a>=0&&this.subscribers.splice(a,1)}broadcast(e,a){for(let c of this.subscribers)c.handleDCMsg(e,a)}}const r=new S;function h(u="#cddee6"){return React.createElement("div",{style:{borderRight:`1px solid ${u}`}})}function v(u="#cddee6"){return React.createElement("div",{style:{borderBottom:`1px solid ${u}`}})}export default class C extends React.Component{constructor(e){super(e),this.state={showWhat:"runningSession",curHistoryReport:null,report:null},this.intervalId=setInterval(()=>{r.needCallPrism&&(Prism.highlightAll(),r.needCallPrism=!1)},2e3),this._setDocLinkLang()}_setDocLinkLang(){let e=document.getElementById("doc-link");e.innerHTML=n("Guide","使用说明"),e.href=n("https://jcyrss.github.io/pytest-assist","https://www.byhy.net/auto/pyatframework/pytest-assist/")}handleWSMsg(e){switch(e.event){case"term":console.log(e.data);break;case"result.get_server_version":console.log("system lang idx is",e.langIdx),e.langIdx!==_.cur&&(_.cur=e.langIdx,this._setDocLinkLang(),this.forceUpdate());break;case"result.get_history_report":let a=JSON.parse(e.content);this.setState({report:a}),setTimeout(()=>{Prism.highlightAll()},1e3);break}}componentDidMount(){d.register(this);let e=d.sendMsg({event:"get_server_version"},!0)}componentWillUnmount(){d.unregister(this)}showWhatChanged(e,a){this.setState({showWhat:e,curHistoryReport:a})}render(){return React.createElement(React.Fragment,null,React.createElement(N,{showWhatChanged:(e,a)=>{this.showWhatChanged(e,a)},showWhat:this.state.showWhat,curHistoryReport:this.state.curHistoryReport}),this.state.showWhat==="runningSession"?React.createElement(x,null):React.createElement(I,{report:this.state.report}))}}class N extends React.Component{constructor(e){super(e),this.state={history_reports:[],select_rules:[]}}handleWSMsg(e){let a;switch(e.event){case"result.list_history_reports":this.setState({history_reports:e.items});break;case"result.deleteall_history_reports":e.ret===0&&this.setState({history_reports:[]});break;case"result.delete_this_history_report":e.ret===0&&d.sendMsg({event:"list_history_reports"});break;case"result.list_select_rules":this.setState({select_rules:e.items});break;case"result.deleteall_select_rules":e.ret===0&&this.setState({select_rules:[]});break;case"result.delete_this_select_rule":e.ret===0&&d.sendMsg({event:"list_select_rules"});break;case"result.save_select_rule":e.ret===0?this.setState({select_rules:e.items}):alert(e.info);break}}componentDidMount(){d.register(this),d.sendMsg({event:"list_history_reports"},!0),d.sendMsg({event:"list_select_rules"},!0)}componentWillUnmount(){d.unregister(this)}render(){return React.createElement("div",{className:"menu"},React.createElement("div",null,React.createElement("span",{className:"ongoing-test btn-no-border",style:{fontSize:".9rem"},onClick:e=>{this.props.showWhatChanged("runningSession")}},n("Ongoing Testing","当前测试")),this.props.showWhat==="runningSession"?React.createElement("span",null,"🚀"):null),v(),React.createElement("div",null,React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{style:{padding:".2rem .5rem",fontSize:".9rem"},title:n("Holding Shift key and double click one item below to delete it","按shift双击下方记录，可以删除"),className:"btn-no-border"},n("History Records","结果记录")),React.createElement("span",{className:"btn-no-border",title:n("Refresh","刷新"),style:{fontSize:"1rem"},onClick:e=>{this.setState({history_reports:[]}),d.sendMsg({event:"list_history_reports"})}},"↺"),this.state.history_reports.length>0?React.createElement("span",{className:"btn-no-border",onClick:e=>{confirm(n("Delete all records?","确定要删除所有测试结果吗？"))&&d.sendMsg({event:"deleteall_history_reports"})}},n("DeleteAll","全部删除")):null),React.createElement("div",{className:"history-report"},this.state.history_reports.map(e=>React.createElement("div",{className:"hlayout btn-no-border color2",key:e,onDoubleClick:a=>{if(a.shiftKey)d.sendMsg({event:"delete_this_history_report",name:e}),this.props.curHistoryReport===e&&this.props.showWhatChanged("runningSession");else{if(this.props.curHistoryReport===e)return;d.sendMsg({event:"get_history_report",name:e}),this.props.showWhatChanged("historySession",e)}}},React.createElement("span",{style:{margin:".2rem 1rem"}},e),this.props.curHistoryReport===e?React.createElement("span",null,"🚀"):null)))),v(),this.genGroup(n("Test Params","参数记录"),"select_rule","select_rules",this.state.select_rules,e=>{this.props.showWhatChanged("runningSession"),r.curTest.showAddTest=!0,d.sendMsg({event:"get_select_rule",name:e})},"color3"))}genGroup(e,a,c,i,t,s="color2"){return React.createElement("div",null,React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{style:{padding:".2rem .5rem",fontSize:".9rem"},title:n("Holding Shift key and double click one item below to delete it","按shift双击下方记录，可以删除"),className:`btn-no-border ${s}`},e),React.createElement("span",{className:"btn-no-border",title:n("Refresh","刷新"),style:{fontSize:"1rem"},onClick:l=>{this.setState({[c]:[]}),d.sendMsg({event:`list_${c}`})}},"↺"),i.length>0?React.createElement("span",{className:`btn-no-border ${s}`,onClick:l=>{confirm(n(`Delete all ${e}？`,`确定要删除所有${e}吗？`))&&d.sendMsg({event:`deleteall_${c}`})}},n("DeleteAll","全部删除")):null),React.createElement("div",{className:c},i.map(l=>React.createElement("div",{className:"hlayout btn-no-border color2",key:l,onDoubleClick:o=>{o.shiftKey?d.sendMsg({event:`delete_this_${a}`,name:l}):t(l)}},React.createElement("span",{style:{margin:".2rem 1rem"}},l)))))}}class x extends React.Component{resetRunningSession(){let e=r.curTest;e.name="--",e.results.length=0,e.start_time="--",e.end_time="--",e.duration=0,e.stats={deselected:0,rtotal:0,executed:0,passed:0,failed:0,skipped:0,xfailed:0,xpassed:0,st_error:0},e.collect_errors=[],e.server_working_dir="--",e.testAborted=!1,e.curNodeId=null}handleWSMsg(e){let a=r.curTest.results;switch(e.event){case"result.get_select_rule":let c=JSON.parse(e.content);r.curTest.showAddTest=!0,r.curTest.addTest_keys=c.keys,r.curTest.addTest_tags=c.tags,r.curTest.addTest_nodeIds=c.nodeIds,document.getElementById("addTest_name").value=c.name,document.getElementById("addTest_keys").value="",document.getElementById("addTest_tags").value="";break;case"result.collect_cases":r.curTest.pytest_cases_tree=e.caseTree;break;case"result.open_new_test":e.ret!==0&&alert(e.info);break;case"result.abort_testing":e.ret===0?r.curTest.testAborted=!0:alert(e.info);break;case"run-test-loop":this.resetRunningSession(),r.curTest.haveRun=!0,r.curTest.name=e.name,r.curTest.start_time=e.start_time,r.curTest.server_working_dir=e.working_dir,r.curTest.stats=e.stats,document.getElementById("test-progress").max=e.stats.rtotal,document.getElementById("test-progress").value=0;break;case"pytest_terminal_summary":r.curTest.stats=e.stats,r.curTest.collect_errors=e.collect_errors,r.curTest.curNodeId=null;break;case"test-session-end":r.curTest.end_time=e.end_time,r.curTest.duration=e.duration,r.curTest.curNodeId=null,d.sendMsg({event:"list_history_reports"});break;case"one-case-begin":r.curTest.curNodeId=e.nodeid;break;case"one-case-end":a.push(e.result),r.curTest.haveRun=!0,r.curTest.stats=e.stats,r.needCallPrism=!0,document.getElementById("test-progress").max=e.stats.rtotal,document.getElementById("test-progress").value=e.stats.executed,r.curTest.results[0].idx!=0&&(console.log("send query_current_testing_state"),d.sendMsg({event:"query_current_testing_state",toIdx:r.curTest.results[0].idx}));break;case"result.current-testing-state":e.results&&(r.curTest.name=e.name,r.curTest.working_dir=e.working_dir,r.curTest.start_time=e.start_time,a.unshift(...e.results));break}this.forceUpdate()}async componentDidMount(){d.register(this)}componentWillUnmount(){d.unregister(this)}render(){return React.createElement("div",{className:"test-session"},this.sectionAddTest(r.curTest),this.sectionSummary(r.curTest),r.curTest.haveRun?React.createElement(b,{rData:r.curTest}):null)}sectionAddTest(e){const a=(t,s)=>{if(t.key==="Enter"){if(s.indexOf(t.target.value)>=0)return;s.push(t.target.value),t.target.value="",this.forceUpdate()}},c=t=>{r.curTest.addTest_nodeIds.indexOf(t)>=0||(r.curTest.addTest_nodeIds.push(t),this.forceUpdate())},i=t=>{let s=JSON.parse(JSON.stringify(r.curTest.addTest_keys)),l=JSON.parse(JSON.stringify(r.curTest.addTest_tags)),o=document.getElementById("addTest_keys").value.trim();return o&&s.push(o),o=document.getElementById("addTest_tags").value.trim(),o&&l.push(o),{name:document.getElementById("addTest_name").value.trim(),keys:s,tags:l,nodeIds:r.curTest.addTest_nodeIds}};return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly",backgroundColor:"#fff8f0"}},React.createElement("span",{className:"btn-no-border color2",style:{fontSize:".92rem"},onClick:t=>{r.curTest.showAddTest||(r.curTest.showAddTest=!0,this.forceUpdate(),d.sendMsg({event:"collect_cases"}))}},n("Test Params Setting","测试参数设置")," "),React.createElement("div",{className:"hlayout",style:{gap:"2rem"}},React.createElement("span",{className:"btn-no-border color2",onClick:t=>{confirm(n("Abort Testing?","确定要 中止测试 吗？"))&&d.sendMsg({event:"abort_testing"})}},n("Abort Testing","中止测试")),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{confirm(n("Force Abort Testing?","确定要 强制停止测试 吗？"))&&d.sendMsg({event:"force_abort_testing"})}},n("Force Abort","强制停止测试")),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{confirm(n("Shut Down Pytest Assist?","确定要 关闭后台 吗？"))&&d.sendMsg({event:"kill_pytest_assist"})}},n("Shut Down","关闭后台")))),r.curTest.showAddTest?React.createElement("div",{className:"add-test-zone"},React.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",background:"aliceblue"}},React.createElement("span",{className:"btn-no-border",style:{marginRight:"5rem",color:"#f06522"},onClick:t=>{let s=i();d.sendMsg({event:"open_new_test",...s,saveRecord:document.getElementById("saveRecord").checked}),this.resetRunningSession(),this.forceUpdate()}},n("Run Testing","执行测试")," "),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{let s=i();d.sendMsg({event:"save_select_rule",...s})}},n("Save Params","保存参数")," "),React.createElement("span",{className:"btn-no-border color2",onClick:t=>{r.curTest.showAddTest=!1,this.forceUpdate()}},n("Cancel","收起界面")," ")),React.createElement("div",{className:"entry"},React.createElement("span",null,n("Test Name","测试名称")),React.createElement("input",{id:"addTest_name",onBlur:t=>{t.target.value=t.target.value.replace(/[^-\w\p{L}]/gu,"")}}),React.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"2rem"}},React.createElement("span",null,n("Save Result","保存测试记录")),React.createElement("input",{type:"checkbox",id:"saveRecord",defaultChecked:!0}))),React.createElement("div",{className:"entry"},React.createElement("span",null,n("Keyword Filters","关键字过滤")),React.createElement("input",{id:"addTest_keys",onKeyDown:t=>a(t,r.curTest.addTest_keys)}),React.createElement("div",{className:"items"},r.curTest.addTest_keys.map((t,s)=>React.createElement("span",{className:"btn-border",key:t,onClick:l=>{r.curTest.addTest_keys.splice(s,1),this.forceUpdate()}},t)))),React.createElement("div",{className:"entry"},React.createElement("span",null,n("Marker Filters","标签过滤")),React.createElement("input",{id:"addTest_tags",onKeyDown:t=>a(t,r.curTest.addTest_tags)}),React.createElement("div",{className:"items"},r.curTest.addTest_tags.map((t,s)=>React.createElement("span",{className:"btn-border",key:t,onClick:l=>{r.curTest.addTest_tags.splice(s,1),this.forceUpdate()}},t)))),React.createElement("div",{className:"entry",style:{alignItems:"baseline"}},React.createElement("div",{className:"hlayout"},React.createElement("span",null,n("Target Tests","目标文件/用例")),React.createElement("span",{className:"btn-no-border",title:n("Refresh","刷新"),style:{fontSize:"1rem"},onClick:t=>{e.pytest_cases_tree={},this.forceUpdate(),d.sendMsg({event:"collect_cases"})}},"↺")),React.createElement("div",{className:"tree"},React.createElement("div",{className:"files"},(()=>{let t=[];for(let[s,l]of Object.entries(e.pytest_cases_tree)){let o=React.createElement("span",{className:e.pytest_cases_tree_curFile===s?"tree-node-file cur-test-file":"tree-node-file",key:s,onClick:p=>{e.pytest_cases_tree_curFile=s,this.forceUpdate()},onDoubleClick:p=>{c(s)}},s);t.push(o)}return t})()),e.pytest_cases_tree_curFile&&e.pytest_cases_tree.hasOwnProperty(e.pytest_cases_tree_curFile)?React.createElement("div",{className:"funcs"},(()=>{let t=[],s=e.pytest_cases_tree_curFile,l=e.pytest_cases_tree[e.pytest_cases_tree_curFile];for(let[o,p]of Object.entries(l.sub)){let m=`${s}::${o}`;if(p.type==="func")t.push(React.createElement("span",{className:"tree-node-func1",key:o,onDoubleClick:f=>{c(m)}},o));else{t.push(React.createElement("span",{className:"tree-node-class",key:o,onDoubleClick:f=>{c(m)}},o));for(let[f,M]of Object.entries(p.sub))t.push(React.createElement("span",{className:"tree-node-func2",key:f,onDoubleClick:R=>{let k=`${m}::${f}`;c(k)}},f))}}return t})()):null),React.createElement("div",{className:"items"},r.curTest.addTest_nodeIds.map((t,s)=>React.createElement("span",{className:"btn-border",key:t,onClick:l=>{r.curTest.addTest_nodeIds.splice(s,1),this.forceUpdate()}},t))))):null)}sectionSummary(e){return React.createElement("div",{className:"test-summary-zone",style:{visibility:e.haveRun?"visible":"hidden"}},React.createElement("div",{className:"left prespace"},React.createElement("div",null,n("Test  Name","测试名称")," : ",e.name),React.createElement("div",null,n("Start Time","开始时间")," : ",e.start_time),React.createElement("div",null,n("End   Time","结束时间")," : ",e.end_time," ",e.duration?` ⏱️= ${e.duration.toFixed(0)} ${n("Seconds","秒")}`:null)),React.createElement("div",{className:"mid prespace"},React.createElement("div",null,n("Working Dir","工作目录")," : ",e.server_working_dir),React.createElement("div",{style:{display:"flex",gap:".8rem"}},React.createElement("span",null,n("Total","总计")," : ",e.stats.rtotal),h(),React.createElement("span",null,n("Executed","已执行")," : ",e.stats.executed),h(),React.createElement("span",null,n("Left","剩余")," : ",e.stats.rtotal-e.stats.executed)),React.createElement("div",{style:{display:"flex",gap:"1rem",alignItems:"center"}},React.createElement("label",{for:"test-progress"},n("Progress","测试进度")),React.createElement("progress",{id:"test-progress",value:"0",max:"0"}),e.testAborted?React.createElement("span",{style:{color:"red"}},n("Aborted","已中止")):null,!e.testAborted&&e.duration?React.createElement("span",{style:{color:"#2196f3"}},n("Done","已完毕")):null),e.curNodeId?React.createElement("span",{style:{color:"#4CAF50",paddingBottom:".1rem"}},e.curNodeId):null))}}class I extends React.Component{async componentDidMount(){d.register(this)}componentWillUnmount(){d.unregister(this)}handleWSMsg(e){switch(e.event){case"result.export_this_history_report":if(e.ret!==0){alert(e.msg);return}window.open(e.link,"_self");break}}render(){let e=this.props.report;return React.createElement("div",{className:"test-session",style:{backgroundColor:"#f1f8fa"}},this.sectionSummary(e),React.createElement(b,{rData:e}))}sectionSummary(e){return e?React.createElement("div",{className:"test-summary-zone",style:{justifyContent:"space-evenly"}},React.createElement("div",{className:"left prespace"},React.createElement("div",null,n("Test  Name","测试名称")," : ",e.name),React.createElement("div",null,n("Start Time","开始时间")," : ",e.start_time),React.createElement("div",null,n("End   Time","结束时间")," : ",e.end_time," ",` ⏱️= ${e.duration.toFixed(0)} ${n("Seconds","秒")}`)),React.createElement("div",{className:"right"},React.createElement("span",{className:"btn-no-border",onClick:a=>{confirm(n("Export to local?","确定要导出报告吗？"))&&d.sendMsg({event:"export_this_history_report",name:e.name})}},n("Export","导出报告")))):null}}class b extends React.Component{constructor(e){super(e),this.state={showPassed:!0,showFailed:!0,showStErr:!0}}filterRuleOK(e){return!(!this.state.showPassed&&e.ret_c==="passed"||!this.state.showFailed&&e.ret_c==="failed"||!this.state.showStErr&&(e.ret_s==="error"||e.ret_t==="error"))}render(){let e=this.props.rData;function a(t){let s="";return t.ret_s==="ok"?t.ret_c==="passed"?t.ret_t==="ok"?s="passed":s="t_error":t.ret_c==="failed"&&(s="failed"):s="s_error",s}function c(t){return t.map(s=>s.reprtext||s.output||s.logs?React.createElement("div",{className:"report "+s.when,key:s.when},React.createElement("div",{className:"report-title"},React.createElement("div",null,s.when),React.createElement("div",null,s.duration)),s.logs&&s.logs.length>0?React.createElement("div",{className:"logs"},s.logs.map(l=>{const o=l.t;return o==="img"?React.createElement("img",{src:`/.pytest_assist/records/${e.name}/imgs/${l.src}`}):o==="txt"?React.createElement("span",{style:{color:l.c?l.c:"",fontWeight:l.w?l.w:""}},l.s):null})):null,s.reprtext?React.createElement("div",{className:"reprtext"},React.createElement("pre",null,React.createElement("code",{className:"language-py"},s.reprtext))):null,s.output?React.createElement("div",{className:"output"},s.output):null):null)}if(!e)return null;let i=e.stats;return React.createElement("div",{className:"test-result-zone"},React.createElement("div",{style:{display:"flex",gap:"3rem",justifyContent:"center",backgroundColor:"#ecf5fc"}},React.createElement("div",{style:{display:"flex",marginLeft:"2rem",gap:"1rem"}},React.createElement("span",null,n("Total","总计")," : ",i.rtotal," "),h("#6c7076"),i.deselected?React.createElement(React.Fragment,null,React.createElement("span",null,n("Deselected","过滤掉")," : ",i.deselected),h("#6c7076")):null,i.passed?React.createElement(React.Fragment,null,React.createElement("span",null,n("Passed","通过")," : ",i.passed),React.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:t=>{this.setState({showPassed:t.target.checked}),t.target.checked&&(r.needCallPrism=!0)}}),h("#6c7076")):null,i.failed?React.createElement(React.Fragment,null,React.createElement("span",{style:{color:i.failed===0?"":"red"}},n("Failed","不通过")," : ",i.failed),React.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:t=>{this.setState({showFailed:t.target.checked}),t.target.checked&&(r.needCallPrism=!0)}}),h("#6c7076")):null,i.st_error?React.createElement(React.Fragment,null,React.createElement("span",{style:{color:i.st_error===0?"":"#9e438b"}},n("Errors","st错误")," : ",i.st_error),React.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:t=>{this.setState({showStErr:t.target.checked}),t.target.checked&&(r.needCallPrism=!0)}}),h("#6c7076")):null,i.skipped?React.createElement(React.Fragment,null,React.createElement("span",null,n("Skipped","忽略")," : ",i.skipped),h("#6c7076")):null,i.xfailed?React.createElement(React.Fragment,null,React.createElement("span",null,n("Expected failures","预期不通过")," : ",i.xfailed)):null),React.createElement("div",{style:{display:"flex",marginLeft:"2rem"}},React.createElement("span",null,n("Show Details","显示详情")),React.createElement("input",{type:"checkbox",id:"show_details",defaultChecked:r.show_result_details,onClick:t=>{let s=document.getElementById("show_details").checked;r.show_result_details=s;let l=s?"flex":"none",o=g(".test-result .details");o.style.display=l;for(let p of document.querySelectorAll(".test-result .details"))p.style.display=l}}))),e.collect_errors&&e.collect_errors.length?React.createElement("div",null,React.createElement("div",{style:{color:"#be2d2d",marginBottom:"1rem",fontWeight:"bold"}},n("Collection Errors:","搜集用例出错：")),e.collect_errors.map((t,s)=>React.createElement("div",{key:s,style:{color:"#be2d2d",whiteSpace:"pre-wrap"}},t))):null,e.results?e.results.map(t=>this.filterRuleOK(t)&&React.createElement("div",{className:"test-result",key:t.idx},React.createElement("div",{className:"test-nodeid "+a(t),onClick:s=>{let l=g(".test-result .details").style.display,o=s.target.nextElementSibling.style,p=o.display;p==="none"?o.display="flex":p==="flex"?o.display="none":p===""&&(o.display=l==="flex"?"none":"flex")}},"  ",t.nodeid),React.createElement("div",{className:"details"},c(t.sct)))):null)}}
